import{a as S,b as N}from"./chunk-SYL5GV3Q.js";import{m as E,p as B}from"./chunk-SRUTDPXE.js";import{a as P}from"./chunk-SOSAYNY5.js";import{a as z,c as R}from"./chunk-ENGQRYG2.js";import{Db as w,Fa as r,Fb as k,Ga as o,Ha as u,Ib as H,Ka as F,Ma as h,Na as M,P as y,U as d,Ub as f,V as x,Va as a,Wa as I,Xa as Y,Z as D,_ as O,ja as v,ka as l,la as c,mb as j,nb as T,tb as L,ua as C,wa as m}from"./chunk-7BGFEG6P.js";function J(s,i){if(s&1&&(r(0,"option",8),a(1),o()),s&2){let p=i.$implicit;m("value",p),l(),I(p)}}function K(s,i){if(s&1){let p=F();r(0,"button",10),h("click",function(){D(p);let t=M().$implicit,n=M();return O(n.expense(t._id))}),a(1,"view"),o()}}function Q(s,i){if(s&1&&(r(0,"tr")(1,"td"),a(2),o(),r(3,"td"),a(4),o(),r(5,"td"),C(6,K,2,0,"button",9),o()()),s&2){let p=i.$implicit;l(2),I(p.month),l(2),Y(" ",p.totalAmount,""),l(2),m("ngIf",p._id)}}var W=(()=>{let i=class i{constructor(e,t){this.store=e,this.router=t,this.years=["2024","2023","2022","2021","2020","2019","2018","2017","2016","2015","2014","2013","2012","2011"],this.searchExpense="",this.currentPage=1,this.limit=5,this.total=0,this.pages=[],this.sortByOrder="desc",this.monthId="",this.selectedYear=new Date().getFullYear().toString(),this.monthlyExpenses=[]}ngOnInit(){this.getMonthlyExpenses()}handleChange(e){let t=e.target;this.selectedYear=t.value.toLowerCase(),this.getMonthlyExpenses()}getMonthlyExpenses(){this.store.dispatch(E({searchYear:this.selectedYear})),this.store.select(e=>e.expense).subscribe(e=>{e&&e.monthlyExpneses&&(this.monthlyExpenses=e.monthlyExpneses)})}monthlyStatistics(){this.router.navigate([`dashboard/statistics/${this.selectedYear}`])}expense(e){this.router.navigate([`dashboard/daily/${e}`])}};i.\u0275fac=function(t){return new(t||i)(c(f),c(k))},i.\u0275cmp=d({type:i,selectors:[["app-home"]],decls:19,vars:2,consts:[[1,"container"],[1,"d-flex","justify-content-end","mt-5"],["type","button",1,"btn","btn-outline-primary","btn-sm",3,"click"],[1,"form-select","w-200px","mx-2",3,"change"],[3,"value",4,"ngFor","ngForOf"],[1,"table-responsive","my-2"],[1,"table","table-bordered"],[4,"ngFor","ngForOf"],[3,"value"],["class","btn btn-outline-primary btn-sm",3,"click",4,"ngIf"],[1,"btn","btn-outline-primary","btn-sm",3,"click"]],template:function(t,n){t&1&&(u(0,"app-header"),r(1,"div",0)(2,"div",1)(3,"button",2),h("click",function(){return n.monthlyStatistics()}),a(4,"Statistics"),o(),r(5,"select",3),h("change",function(g){return n.handleChange(g)}),C(6,J,2,2,"option",4),o()(),r(7,"div",5)(8,"table",6)(9,"thead")(10,"tr")(11,"th"),a(12,"Month"),o(),r(13,"th"),a(14,"Total Expense"),o(),r(15,"th"),a(16,"Monthly Statistics"),o()()(),r(17,"tbody"),C(18,Q,7,3,"tr",7),o()()()()),t&2&&(l(6),m("ngForOf",n.years),l(12),m("ngForOf",n.monthlyExpenses))},dependencies:[j,T,z],styles:[".w-200px[_ngcontent-%COMP%]{width:200px}.pie-chart-icon[_ngcontent-%COMP%]{width:32px;height:32px;display:inline-block}"]});let s=i;return s})();var V=(()=>{let i=class i{constructor(e,t){this.store=e,this.activeRoute=t,this.selectedYear="",this.view=[300,300],this.expensesData=[],this.showLegend=!0,this.showLabels=!0,this.explodeSlices=!1,this.doughnut=!1,this.colorScheme="natural"}ngOnInit(){this.selectedYear=this.activeRoute.snapshot.params?.id,this.getMonthlyExpenses(),this.updateChartSize()}updateChartSize(){let e=document.getElementById("chartCard");if(e){let t=e.offsetWidth,n=Math.min(t,window.innerHeight*.6);this.view=[t*.9,n*.9]}}getMonthlyExpenses(){this.store.dispatch(E({searchYear:this.selectedYear})),this.store.select(e=>e.expense).subscribe(e=>{e&&e.monthlyExpneses&&(this.expensesData=e.monthlyExpneses.map(t=>({name:t.month,value:t.totalAmount})))})}};i.\u0275fac=function(t){return new(t||i)(c(f),c(w))},i.\u0275cmp=d({type:i,selectors:[["app-statistics"]],hostBindings:function(t,n){t&1&&h("resize",function(g){return n.ngOnInit(g)},!1,v)},decls:5,vars:7,consts:[[1,"container-lg","d-flex","justify-content-center","align-items-center","min-vh-100"],["id","chartCard",1,"card","shadow","p-3","w-100"],[1,"text-center"],[3,"view","scheme","results","legend","explodeSlices","labels","doughnut"]],template:function(t,n){t&1&&(r(0,"div",0)(1,"div",1)(2,"h3",2),a(3,"Track Expenses"),o(),u(4,"ngx-charts-pie-chart",3),o()()),t&2&&(l(4),m("view",n.view)("scheme",n.colorScheme)("results",n.expensesData)("legend",n.showLegend)("explodeSlices",n.explodeSlices)("labels",n.showLabels)("doughnut",n.doughnut))},dependencies:[S],styles:[".h-full[_ngcontent-%COMP%]{height:100vh}"]});let s=i;return s})();var G=(()=>{let i=class i{constructor(e,t){this.store=e,this.acitveRoute=t,this.selectedYear=new Date().getFullYear().toString(),this.selectedMonth="",this.view=[300,300],this.expensesData=[],this.showLegend=!0,this.showLabels=!0,this.explodeSlices=!1,this.doughnut=!1,this.colorScheme="natural"}ngOnInit(){this.selectedMonth=this.acitveRoute.snapshot.params?.id,this.store.select(e=>e.expense).subscribe(e=>{e&&e.dailyExpneses&&(this.day=e.dailyExpneses.find(t=>t._id===+this.selectedMonth),console.log(this.day))}),this.getDailyExpenses(),this.updateChartSize()}updateChartSize(){let e=document.getElementById("chartCard");if(e){let t=e.offsetWidth,n=Math.min(t,window.innerHeight*.6);this.view=[t*.9,n*.9]}}getDailyExpenses(){this.store.dispatch(B({searchYear:this.selectedYear,searchMonth:this.selectedMonth})),this.store.select(e=>e.expense).subscribe(e=>{e&&e.dailyExpneses&&(this.expensesData=e.dailyExpneses.map(t=>({name:t.date,value:t.totalAmount})))})}};i.\u0275fac=function(t){return new(t||i)(c(f),c(w))},i.\u0275cmp=d({type:i,selectors:[["app-daily"]],hostBindings:function(t,n){t&1&&h("resize",function(g){return n.ngOnInit(g)},!1,v)},decls:5,vars:7,consts:[[1,"container-lg","d-flex","justify-content-center","align-items-center","min-vh-100"],["id","chartCard",1,"card","shadow","p-3","w-100"],[1,"text-center"],[3,"view","scheme","results","legend","explodeSlices","labels","doughnut"]],template:function(t,n){t&1&&(r(0,"div",0)(1,"div",1)(2,"h3",2),a(3,"Track Expenses"),o(),u(4,"ngx-charts-pie-chart",3),o()()),t&2&&(l(4),m("view",n.view)("scheme",n.colorScheme)("results",n.expensesData)("legend",n.showLegend)("explodeSlices",n.explodeSlices)("labels",n.showLabels)("doughnut",n.doughnut))},dependencies:[S],styles:[".h-full[_ngcontent-%COMP%]{height:100vh}"]});let s=i;return s})();var X=[{path:"",canActivate:[P],children:[{path:"",component:W,title:"Home"},{path:"statistics/:id",component:V,title:"Statictics"},{path:"daily/:id",component:G,title:"Home"}]}],q=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=x({type:i}),i.\u0275inj=y({imports:[H.forChild(X),H,N]});let s=i;return s})();var Se=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=x({type:i}),i.\u0275inj=y({imports:[L,q,R]});let s=i;return s})();export{Se as DashboardModule};
