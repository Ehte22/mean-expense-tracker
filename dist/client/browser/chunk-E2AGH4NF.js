import{a as he,d as fe,g as xe,j as ge}from"./chunk-SRUTDPXE.js";import{d as be}from"./chunk-W2TK6E25.js";import{a as X,b as x,c as Z,d as ee,e as te,h as ie,i as ne,j as re,k as ae,l as oe,m as se,n as le,o as pe,p as me,t as de,v as ce}from"./chunk-QUJJTKVN.js";import{a as ue}from"./chunk-SKGUGSP7.js";import{a as _e}from"./chunk-SOSAYNY5.js";import{a as ve,b as Ee,c as ye}from"./chunk-XHWYWDA2.js";import{$a as D,Ba as j,Ca as U,Da as $,Db as O,Ea as R,Fa as e,Fb as J,Ga as t,Gb as Q,Ha as d,Hb as W,Ib as L,Ka as w,Ma as u,Na as f,P as k,U as b,Ub as T,V as F,Va as n,Wa as c,Xa as A,Z as C,_ as S,_a as G,bb as _,cb as y,db as z,g as q,ka as l,la as g,lb as I,mb as P,nb as B,pb as N,rb as K,sb as Y,tb as H,ua as v,wa as m}from"./chunk-7BGFEG6P.js";var Ae=()=>["create"],Ie=s=>({"table-danger":s});function Pe(s,o){if(s&1){let p=w();e(0,"button",35),u("click",function(){C(p);let r=f().$implicit,a=f();return S(a.viewExpense(r._id))}),d(1,"i",36),e(2,"span",37),n(3,"View"),t()()}}function Be(s,o){if(s&1){let p=w();e(0,"button",35),u("click",function(){C(p);let r=f().$implicit,a=f();return S(a.editExpense(r._id))}),d(1,"i",38),e(2,"span",37),n(3,"Edit"),t()()}}function Ne(s,o){if(s&1){let p=w();e(0,"span",39),u("click",function(){C(p);let r=f().$implicit,a=f();return S(a.deleteExpense(r._id))}),n(1,"Delete"),t()}}function Oe(s,o){if(s&1&&(e(0,"tr",27)(1,"td"),n(2),t(),e(3,"td"),n(4),_(5,"titlecase"),t(),e(6,"td"),n(7),_(8,"titlecase"),t(),e(9,"td"),n(10),t(),e(11,"td"),n(12),t(),e(13,"td")(14,"div",9)(15,"button",28),d(16,"i",29),t(),e(17,"ul",12)(18,"li",30),v(19,Pe,4,0,"button",31),t(),e(20,"li",30),v(21,Be,4,0,"button",31),t(),e(22,"li",30)(23,"button",32),d(24,"i",33),v(25,Ne,2,0,"span",34),t()()()()()()),s&2){let p=o.$implicit,i=o.index;m("ngClass",D(13,Ie,p.deletedAt!==null)),l(2),c(i+1),l(2),c(y(5,9,p.type)),l(3),c(y(8,11,p.title)),l(3),c(p.desc),l(2),c(p.amount),l(7),m("ngIf",p._id),l(2),m("ngIf",p._id),l(4),m("ngIf",p._id)}}var Te=(()=>{let o=class o{constructor(i,r){this.store=i,this.router=r,this.isDeleted=new q,this.getAllExpenses=[],this.searchExpense="",this.filterByStatus="all",this.currentPage=1,this.limit=5,this.total=0,this.pages=[],this.sortByOrder="desc"}ngOnInit(){this.getExpenses(),this.isDeleted=this.store.select(i=>i.expense.isDeleted),this.isDeleted.subscribe(i=>{i&&this.getExpenses()})}handleChange(i){let r=i.target;r.type==="search"?this.searchExpense=r.value.toLowerCase():r.name==="status"&&(this.filterByStatus=r.value.toLowerCase()),this.currentPage=1,this.getExpenses()}sortByDate(i){this.sortByOrder=i,this.getExpenses()}getExpenses(){this.store.dispatch(fe({page:this.currentPage,limit:this.limit,searchExpense:this.searchExpense,sortByOrder:this.sortByOrder,filterByStatus:this.filterByStatus})),this.store.select(i=>i.expense).subscribe(i=>{this.getAllExpenses=i.expenses,this.total=i.total,this.currentPage=i.page})}deleteExpense(i){this.store.dispatch(ge({id:i})),this.getExpenses()}editExpense(i){this.router.navigate([`expenses/update/${i}`])}viewExpense(i){this.router.navigate([`expenses/view/${i}`])}onPageChange(i){this.currentPage=i,this.getExpenses()}};o.\u0275fac=function(r){return new(r||o)(g(T),g(J))},o.\u0275cmp=b({type:o,selectors:[["app-expenses-list"]],decls:58,vars:6,consts:[[1,"container"],[1,"d-flex","justify-content-between","mt-5"],[1,"search-container"],["type","search","placeholder","Search by type",1,"form-control","me-3",3,"input"],[1,"fa-solid","fa-magnifying-glass"],[1,""],["routerLinkActive","router-link-active",1,"btn","btn-primary",3,"routerLink"],[1,"row","mt-4"],[1,"col-lg-4","col-sm-6"],[1,"dropdown"],["type","button","id","dropdownMenuButton1","data-bs-toggle","dropdown",1,"dropdown-toggle","dropdown_btn","no-arrow","fs-4"],[1,"fa-solid","fa-sort","text-primary"],[1,"dropdown-menu"],[1,"dropdown-item",3,"click"],[1,"d-flex","gap-3"],["type","radio","id","all","name","status","value","all","checked","",1,"form-check-input","me-2",3,"input"],["for","all",1,"form-label"],["type","radio","id","active","name","status","value","null",1,"form-check-input","me-2",3,"input"],["for","active",1,"form-label"],["type","radio","id","inactive","name","status","value","date",1,"form-check-input","me-2",3,"input"],["for","inactive",1,"form-label"],[1,"col"],[1,"table-responsive","card","shadow"],[1,"table"],[1,"table-dark"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"pageChange","currentPage","limit","total"],[3,"ngClass"],["type","button","id","dropdownMenuButton1","data-bs-toggle","dropdown",1,"dropdown-toggle","dropdown_btn","no-arrow"],[1,"fa-solid","fa-ellipsis-vertical"],[1,"dropdown-item"],["class","border-0 bg-transparent",3,"click",4,"ngIf"],[1,"border-0","bg-transparent"],[1,"fa-solid","fa-trash","text-danger"],["class","ms-2",3,"click",4,"ngIf"],[1,"border-0","bg-transparent",3,"click"],[1,"fa-solid","fa-eye","text-success"],[1,"ms-2"],[1,"fa-solid","fa-pen-to-square","text-primary"],[1,"ms-2",3,"click"]],template:function(r,a){r&1&&(d(0,"app-header"),e(1,"div",0)(2,"div",1)(3,"div",2)(4,"input",3),u("input",function(E){return a.handleChange(E)}),t(),d(5,"i",4),t(),e(6,"div",5)(7,"button",6),n(8,"+Add Expense"),t()()(),e(9,"div",7)(10,"div",8)(11,"h3"),n(12,"Sort By Date"),t(),e(13,"div",9)(14,"button",10),d(15,"i",11),t(),e(16,"ul",12)(17,"li",13),u("click",function(){return a.sortByDate("asc")}),n(18,"Ascending"),t(),e(19,"li",13),u("click",function(){return a.sortByDate("desc")}),n(20,"Descending"),t()()()(),e(21,"div",8)(22,"h3"),n(23,"Filter By Status"),t(),e(24,"div",14)(25,"div")(26,"input",15),u("input",function(E){return a.handleChange(E)}),t(),e(27,"label",16),n(28,"All"),t()(),e(29,"div")(30,"input",17),u("input",function(E){return a.handleChange(E)}),t(),e(31,"label",18),n(32,"Active"),t()(),e(33,"div")(34,"input",19),u("input",function(E){return a.handleChange(E)}),t(),e(35,"label",20),n(36,"InActive"),t()()()()(),e(37,"div",7)(38,"div",21)(39,"div",22)(40,"table",23)(41,"thead")(42,"tr",24)(43,"th"),n(44,"#"),t(),e(45,"th"),n(46,"Type"),t(),e(47,"th"),n(48,"Title"),t(),e(49,"th"),n(50,"Description"),t(),e(51,"th"),n(52,"Amount"),t(),e(53,"th"),n(54,"Actions"),t()()(),e(55,"tbody"),v(56,Oe,26,15,"tr",25),t()(),e(57,"app-pagination",26),u("pageChange",function(E){return a.onPageChange(E)}),t()()()()()),r&2&&(l(7),m("routerLink",G(5,Ae)),l(49),m("ngForOf",a.getAllExpenses),l(),m("currentPage",a.currentPage)("limit",a.limit)("total",a.total))},dependencies:[I,P,B,Q,W,ve,Ee,N],styles:[".dropdown_btn[_ngcontent-%COMP%]{background:none!important;border:none}.no-arrow[_ngcontent-%COMP%]:after{display:none}.inp-search[_ngcontent-%COMP%]{max-width:300px}.search-container[_ngcontent-%COMP%]{position:relative;width:fit-content;width:220px}.search-container[_ngcontent-%COMP%]   input[type=search][_ngcontent-%COMP%]{padding-right:30px}.search-container[_ngcontent-%COMP%]   .fa-magnifying-glass[_ngcontent-%COMP%]{font-size:20px;position:absolute;right:10px;top:50%;transform:translateY(-50%);color:#aaa}.fs-18[_ngcontent-%COMP%]{font-size:18px}@media screen and (min-width: 620px){.search-container[_ngcontent-%COMP%]{position:relative;width:fit-content;width:400px}}"]});let s=o;return s})();var De=s=>({"is-invalid":s});function Ve(s,o){if(s&1&&(e(0,"option",34),n(1),t()),s&2){let p=o.$implicit;m("value",p.type),l(),A("",p.type," ")}}function Le(s,o){if(s&1){let p=w();e(0,"div",35)(1,"div",36)(2,"div",25)(3,"label",37),n(4,"Tag Key:"),t(),d(5,"input",38),e(6,"small",18),n(7,"*Tag key is required"),t()(),e(8,"div",25)(9,"label",39),n(10,"Tag Value:"),t(),d(11,"input",40),e(12,"small",18),n(13,"*Tag value is required"),t()(),e(14,"div",41)(15,"button",42),u("click",function(){let r=C(p).index,a=f();return S(a.removeTag(r))}),n(16,"Delete Tag"),t()()()()}if(s&2){let p,i,r=o.index,a=f();m("formGroupName",r),l(5),m("ngClass",D(3,De,((p=a.tags.controls[r].get("key"))==null?null:p.touched)&&((p=a.tags.controls[r].get("key"))==null?null:p.errors))),l(6),m("ngClass",D(5,De,((i=a.tags.controls[r].get("value"))==null?null:i.touched)&&((i=a.tags.controls[r].get("value"))==null?null:i.errors)))}}var M=(()=>{let o=class o{constructor(i,r,a,h){this.store=i,this.formBuilder=r,this.toastr=a,this.activeRoute=h,this.isEdit=!1,this.getAllTypes=[],this.expenseForm=new te({}),this.currentPage=1,this.limit=5,this.total=0,this.searchType="",this.sortByOrder="desc",this.maxDate="",this.minDate=""}ngOnInit(){this.expenseForm=this.formBuilder.group({type:["",x.required],title:["",x.required],desc:["",x.required],date:["",x.required],amount:["",x.required],tags:this.formBuilder.array([this.formBuilder.group({key:["",x.required],value:["",x.required]})])});let i=new Date;this.maxDate=this.formatDate(i);let r=new Date;r.setDate(i.getDate()-60),this.minDate=this.formatDate(r),this.getTypes(),this.editExpense()}formatDate(i){let r=i.getFullYear(),a=("0"+(i.getMonth()+1)).slice(-2),h=("0"+i.getDate()).slice(-2);return`${r}-${a}-${h}`}getTypes(){this.store.dispatch(be({isFetchAll:!1,page:this.currentPage,limit:this.limit,searchType:this.searchType,sortByOrder:this.sortByOrder})),this.store.select(i=>i.type).subscribe(i=>{this.getAllTypes=i.types,this.total=i.total,this.currentPage=i.page})}onSubmit(){this.expenseForm.valid?this.selectedExpense?(this.isEdit=!0,this.updateExpense()):(this.isEdit=!1,this.addExpense()):(this.expenseForm.markAllAsTouched(),this.toastr.error("All fields are requied","Error",{timeOut:5e3,closeButton:!0,progressBar:!0}))}get tags(){return this.expenseForm.get("tags")}removeTag(i){this.tags.removeAt(i)}addTag(){this.tags.push(this.formBuilder.group({key:["",x.required],value:["",x.required]}))}validateField(i){return this.expenseForm.get(i)?.touched&&this.expenseForm.get(i)?.errors?"is-invalid":""}addExpense(){this.store.dispatch(he({expenseData:this.expenseForm.value}))}editExpense(){let i=this.activeRoute.snapshot.params?.id;this.store.select(r=>r.expense).subscribe(r=>{this.selectedExpense=r.expenses.find(a=>a._id===i)}),this.selectedExpense&&(this.isEdit=!0,this.expenseForm.patchValue({type:this.selectedExpense.type,title:this.selectedExpense.title,desc:this.selectedExpense.desc,date:this.selectedExpense.date,amount:this.selectedExpense.amount}),this.setTags(this.selectedExpense?.tags||[]))}setTags(i){let r=this.expenseForm.get("tags");r.clear(),i.forEach(a=>{r.push(this.formBuilder.group({key:[a.key,x.required],value:[a.value,x.required]}))})}updateExpense(){this.selectedExpense&&this.selectedExpense._id&&this.store.dispatch(xe({id:this.selectedExpense?._id,selectedExpense:this.expenseForm.value}))}previousPage(){this.currentPage>1&&(this.currentPage--,this.getTypes())}nextPage(){this.currentPage<this.total/this.limit&&(this.currentPage++,this.getTypes())}};o.\u0275fac=function(r){return new(r||o)(g(T),g(de),g(ue),g(O))},o.\u0275cmp=b({type:o,selectors:[["app-create-update"]],decls:57,vars:13,consts:[[1,"container"],[1,"d-flex","justify-content-center"],[1,"mt-5"],[1,"card","shadow","p-3"],[1,"text-center","mt-3"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"mb-3"],[1,"d-flex","justify-content-between"],["for","type",1,"form-label"],["role","group",1,"btn-group"],["type","button",1,"btn","btn-outline-primary","btn-sm",3,"click"],[1,"bi","bi-chevron-left"],["type","button",1,"btn","btn-outline-primary","btn-sm"],[1,"bi","bi-chevron-right"],["id","type","formControlName","type",1,"form-select",3,"ngClass"],["hidden","","value",""],[3,"value",4,"ngFor","ngForOf"],[1,"invalid-feedback"],[1,"my-3"],["for","title",1,"form-label"],["type","text","id","title","formControlName","title","placeholder","Enter Title",1,"form-control",3,"ngClass"],["for","desc",1,"form-label"],["type","text","id","desc","formControlName","desc","placeholder","Enter Description",1,"form-control",3,"ngClass"],[1,"row","my-3"],[1,"col-6"],["for","date",1,"form-label"],["type","date","id","date","formControlName","date",1,"form-control",3,"ngClass","min","max"],["for","amount",1,"form-label"],["type","number","id","amount","formControlName","amount","placeholder","Enter Amout",1,"form-control",3,"ngClass"],["formArrayName","tags"],["class","my-2 border rounded-1 mt-3 p-3",3,"formGroupName",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-dark",3,"click"],[1,"btn","btn-primary","w-100","mt-3","btn-lg"],[3,"value"],[1,"my-2","border","rounded-1","mt-3","p-3",3,"formGroupName"],[1,"row"],["for","key",1,"form-label"],["type","text","id","key","formControlName","key","placeholder","Enter Tag key",1,"form-control",3,"ngClass"],["for","value",1,"form-label"],["type","number","id","value","formControlName","value","placeholder","Enter Tag Value",1,"form-control",3,"ngClass"],[1,"mt-3"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(r,a){r&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),n(5),t(),e(6,"div",5)(7,"form",6),u("ngSubmit",function(){return a.onSubmit()}),e(8,"div",7)(9,"div",8)(10,"label",9),n(11,"Expense Type:"),t(),e(12,"div")(13,"div",10)(14,"button",11),u("click",function(){return a.previousPage()}),d(15,"i",12),t(),e(16,"button",13),n(17),t(),e(18,"button",11),u("click",function(){return a.nextPage()}),d(19,"i",14),t()()()(),e(20,"select",15)(21,"option",16),n(22,"Select Type"),t(),v(23,Ve,2,2,"option",17),t(),e(24,"small",18),n(25,"*Expense type is a required field"),t()(),e(26,"div",19)(27,"label",20),n(28,"Title:"),t(),d(29,"input",21),e(30,"small",18),n(31,"*Title is a required field"),t()(),e(32,"div",19)(33,"label",22),n(34,"Description:"),t(),d(35,"input",23),e(36,"small",18),n(37,"*Description type is a required field"),t()(),e(38,"div",24)(39,"div",25)(40,"label",26),n(41,"Date:"),t(),d(42,"input",27),e(43,"small",18),n(44,"*Date type is a required field"),t()(),e(45,"div",25)(46,"label",28),n(47,"Amount:"),t(),d(48,"input",29),e(49,"small",18),n(50,"*Amount type is a required field"),t()()(),e(51,"div",30),v(52,Le,17,7,"div",31),e(53,"button",32),u("click",function(){return a.addTag()}),n(54,"Add Tag"),t()(),e(55,"button",33),n(56),t()()()()()()()),r&2&&(l(5),c(a.isEdit?"Update Expense":"Add Expenses"),l(2),m("formGroup",a.expenseForm),l(10),A(" ",a.currentPage," "),l(3),m("ngClass",a.validateField("type")),l(3),m("ngForOf",a.getAllTypes),l(6),m("ngClass",a.validateField("title")),l(6),m("ngClass",a.validateField("desc")),l(7),m("ngClass",a.validateField("date"))("min",a.minDate)("max",a.maxDate),l(6),m("ngClass",a.validateField("amount")),l(4),m("ngForOf",a.tags.controls),l(4),A(" ",a.isEdit?"Update Expense":"Add Expense"," "))},dependencies:[I,P,ie,pe,me,X,ne,le,Z,ee,re,se,ae,oe]});let s=o;return s})();function Me(s,o){if(s&1&&(e(0,"tr")(1,"td"),n(2),t(),e(3,"td"),n(4),t(),e(5,"td"),n(6),t()()),s&2){let p=o.$implicit,i=o.$index;l(2),c(i+1),l(2),c(p.key),l(2),c(p.value)}}function qe(s,o){if(s&1&&$(0,Me,7,3,"tr",null,U),s&2){let p=f(2);R(p.expenseDetail.tags)}}function je(s,o){s&1&&(e(0,"tr")(1,"td",8),n(2,"No data found"),t()())}function Ue(s,o){if(s&1&&(e(0,"div",3)(1,"h3",4),n(2),_(3,"titlecase"),t(),e(4,"h4",4),n(5,"Type:- "),e(6,"span"),n(7),_(8,"titlecase"),t()(),e(9,"h4",4),n(10,"Amount:- "),e(11,"span"),n(12),_(13,"currency"),t()(),e(14,"h5",4),d(15,"i",5),n(16,"\xA0Date Created\xA0:- "),e(17,"span"),n(18),_(19,"date"),t()(),e(20,"h5",4),d(21,"i",5),n(22,"\xA0Date Updated\xA0:- "),e(23,"span"),n(24),_(25,"date"),t()(),e(26,"h5",4),n(27," Description:- "),e(28,"span"),n(29),_(30,"titlecase"),t()(),e(31,"h5",6),n(32,"List Of All Tags"),t(),e(33,"table",7)(34,"thead")(35,"tr")(36,"th"),n(37,"#"),t(),e(38,"th"),n(39,"Key"),t(),e(40,"th"),n(41,"Value"),t()()(),e(42,"tbody"),v(43,qe,2,0)(44,je,3,0),t()()()),s&2){let p=f();l(2),c(y(3,7,p.expenseDetail.title)),l(5),c(y(8,9,p.expenseDetail.type)),l(5),c(z(13,11,p.expenseDetail.amount,"INR")),l(6),c(y(19,14,p.expenseDetail.createdAt)),l(6),c(y(25,16,p.expenseDetail.updatedAt)),l(5),c(y(30,18,p.expenseDetail.desc)),l(14),j(43,p.expenseDetail.tags&&p.expenseDetail.tags.length>0?43:44)}}var ke=(()=>{let o=class o{constructor(i,r){this.activeRoute=i,this.store=r}ngOnInit(){let i=this.activeRoute.snapshot.params?.id;this.store.select(r=>r.expense).subscribe(r=>{this.expenseDetail=r.expenses.find(a=>a._id===i),console.log(this.expenseDetail)})}};o.\u0275fac=function(r){return new(r||o)(g(O),g(T))},o.\u0275cmp=b({type:o,selectors:[["app-view"]],decls:3,vars:1,consts:[[1,"container"],[1,"card","shadow","col-lg-5","mt-5","mx-auto"],["class","card-body text-center",4,"ngIf"],[1,"card-body","text-center"],[1,"my-2"],[1,"fa-solid","fa-calendar-days","calendar"],[1,"mt-3"],[1,"table","table-bordered"],["colspan","3"]],template:function(r,a){r&1&&(e(0,"div",0)(1,"div",1),v(2,Ue,45,20,"div",2),t()()),r&2&&(l(2),m("ngIf",a.expenseDetail))},dependencies:[B,N,Y,K]});let s=o;return s})();var $e=[{path:"",canActivate:[_e],children:[{path:"",component:Te,title:"Expenses List"},{path:"create",component:M,title:"Create Expense"},{path:"update/:id",component:M,title:"Update Expense"},{path:"view/:id",component:ke,title:"View"}]}],Fe=(()=>{let o=class o{};o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=F({type:o}),o.\u0275inj=k({imports:[L.forChild($e),L]});let s=o;return s})();var gt=(()=>{let o=class o{};o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=F({type:o}),o.\u0275inj=k({imports:[H,Fe,ce,ye]});let s=o;return s})();export{gt as ExpensesModule};
